<!DOCTYPE html>
<html>
<head>
    <title>BeadNet demo for Puzzle ITC</title>
    <link rel="stylesheet" href="./docs/styles/jsdoc-default.css">
    <meta charset="utf-8">
    <style>
        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0;
        }

        p {
            margin-left: 20px;
        }

        #beadnet {
            border: 3px solid gray;
            box-sizing: border-box;
            position: absolute;
            top: 20%;
            left: 0;
            bottom: 0;
            right: 25%;
        }

        #controls {
            position: absolute;
            background-color: lightgray;
            top: 20%;
            left: 75%;
            bottom: 0;
            right: 0;
            padding: 1em;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
    <script src="dist/beadnet.standalone.min.js"></script>
</head>
<body>
<h1 id="beadnet-alpha-preview-">BeadNet demo for Puzzle ITC</h1>
<p>
    A visualisation of how Lightning Network salary payments could work at Puzzle ITC.<br/>
    This demo is based on the <a href="https://github.com/mojoaxel/beadnet">BeadNet library</a> of
    <a href="//github.com/mojoaxel">Alexander Wunschik</a>.
</p>

<div id="container">
    <div id="beadnet"></div>
    <div id="controls">
        <fieldset id="add-node">
            <legend>presentation</legend>
            <button id="nextStep">Next Step</button>
        </fieldset>
    </div>

    <script>
        window.onload = function () {

            var colors = d3.scaleOrdinal(d3.schemeCategory10);

            // initialize BeadNet
            window.bn = new beadnet({
                colorScheme: colors,
                presentation: {
                    steps: [
                        [
                            {
                                cmd: 'ADD_NODES', args: [[
                                    { id: 'Oli', balance: 10 },
                                    { id: 'Thömu', balance: 10 },
                                    { id: 'Sarah', balance: 10 },
                                    { id: 'Robin', balance: 10 },
                                    { id: 'Ädu', balance: 10 },
                                    { id: 'Adrian', balance: 10 },
                                    { id: 'Dänu', balance: 10 },
                                    { id: 'Ändu', balance: 10 },
                                    { id: 'PuzzleITC', balance: 100 },
                                    { id: 'Digitec', balance: 0 },
                                ]]
                            },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Oli', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Thömu', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Sarah', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Robin', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Ädu', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Adrian', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Dänu', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'Ändu', sourceBalance: 5, target: 'PuzzleITC', targetBalance: 0 }] },
                            { cmd: 'ADD_CHANNEL', args: [{ source: 'PuzzleITC', sourceBalance: 10, target: 'Digitec', targetBalance: 0 }] },
                        ],
                        [
                            { cmd: 'MOVE_BEADS', args: ['Oli', 'PuzzleITC', 1, null] },
                            { cmd: 'MOVE_BEADS', args: ['Thömu', 'PuzzleITC', 1, null] },
                            { cmd: 'MOVE_BEADS', args: ['Sarah', 'PuzzleITC', 1, null] },
                            { cmd: 'MOVE_BEADS', args: ['Robin', 'PuzzleITC', 1, null] },
                            { cmd: 'MOVE_BEADS', args: ['Ädu', 'PuzzleITC', 1, null] },
                            { cmd: 'MOVE_BEADS', args: ['PuzzleITC', 'Digitec', 5, null] },
                        ]
                    ]
                }
            });
            bn.nextStep();

            var btnNextStep = document.querySelector('button#nextStep');
            btnNextStep.addEventListener('click', function () {
                bn.nextStep();
            });

        };
    </script>
</div>

</body>
</html>
